pipeline {
    agent any
    stages{
        stage('init'){
            steps{
                sh 'mvn clean package'
                post{
                    echo "Now Archiving.."
                archiveArtifacts artifacts: '**/target/*.war'

                }
            }
        }

        stage('deployment'){
            steps{
                build job: 'Deploy-to-staging'
            }
        }

        stage('deploy to prod'){
            steps {
                timeout(time:5, unit:'Days'){
                    input message: 'approve production deployment? '

                }
            {
                build job: 'Deploy to prod'
            }
            post {
                success{
                    echo 'code deployment to production'
                }

                failure{
                    echo 'deployment failed'
                }
            }


            }
            }
        }
    }
}

